<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SyncLife: Intelligent Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
            background-color: #f8fafc;
        }
        .safe-area-bottom {
            padding-bottom: env(safe-area-inset-bottom);
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@19.2.3",
        "react-dom/client": "https://esm.sh/react-dom@19.2.3/client",
        "@google/genai": "https://esm.sh/@google/genai@1.34.0"
      }
    }
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="overflow-x-hidden">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useMemo, useCallback } from 'react';
        import ReactDOM from 'react-dom/client';
        import { GoogleGenAI, Type } from '@google/genai';

        // --- Icons ---
        const PlusIcon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        );
        const CalendarIcon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
        );
        const ClockIcon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
        );
        const SparklesIcon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path><path d="M19 3v4"></path><path d="M21 5h-4"></path></svg>
        );
        const SettingsIcon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        );
        const CheckIcon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
        );
        const TrashIcon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
        );
        const XIcon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        );
        const LayoutIcon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg>
        );
        const ExternalLinkIcon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
        );

        const STORAGE_KEY = 'synclife_v4_data';

        const App = () => {
            const [activeTab, setActiveTab] = useState('routines');
            const [routines, setRoutines] = useState([]);
            const [events, setEvents] = useState([]);
            const [timetables, setTimetables] = useState([]);
            const [isAiLoading, setIsAiLoading] = useState(false);
            const [aiPrompt, setAiPrompt] = useState('');
            const [groundingSources, setGroundingSources] = useState([]);
            
            const [showRoutineModal, setShowRoutineModal] = useState(false);
            const [showEventModal, setShowEventModal] = useState(false);
            const [showTimetableModal, setShowTimetableModal] = useState(false);
            const [selectedBlueprint, setSelectedBlueprint] = useState(null);

            // Persistance
            useEffect(() => {
                const saved = localStorage.getItem(STORAGE_KEY);
                if (saved) {
                    const data = JSON.parse(saved);
                    setRoutines(data.routines || []);
                    setEvents(data.events || []);
                    setTimetables(data.timetables || []);
                }
            }, []);

            useEffect(() => {
                localStorage.setItem(STORAGE_KEY, JSON.stringify({ routines, events, timetables }));
            }, [routines, events, timetables]);

            const handleRoutineToggle = (id) => {
                const today = new Date().toISOString().split('T')[0];
                setRoutines(prev => prev.map(r => {
                    if (r.id === id) {
                        const history = r.history || [];
                        const isDone = history.includes(today);
                        return { 
                            ...r, 
                            history: isDone ? history.filter(d => d !== today) : [...history, today] 
                        };
                    }
                    return r;
                }));
            };

            const runAiArchitect = async () => {
                if (!aiPrompt.trim()) return;
                setIsAiLoading(true);
                setGroundingSources([]);
                
                try {
                    // Guidelines: Initialize right before use
                    const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
                    const response = await ai.models.generateContent({
                        model: "gemini-3-flash-preview",
                        contents: `As a professional life coach, research and build a routine for: "${aiPrompt}". Return a JSON array of objects with {title, time (HH:mm), category, days (array of strings like "Mon")}. Use search to find current best practices.`,
                        config: {
                            tools: [{ googleSearch: {} }],
                            responseMimeType: "application/json",
                            responseSchema: {
                                type: Type.ARRAY,
                                items: {
                                    type: Type.OBJECT,
                                    properties: {
                                        title: { type: Type.STRING },
                                        time: { type: Type.STRING },
                                        category: { type: Type.STRING, enum: ["health", "work", "personal", "education"] },
                                        days: { type: Type.ARRAY, items: { type: Type.STRING } }
                                    },
                                    required: ["title", "time", "category", "days"]
                                }
                            }
                        }
                    });

                    const results = JSON.parse(response.text || "[]");
                    const newRoutines = results.map(r => ({ ...r, id: Math.random().toString(36).substr(2, 9), history: [] }));
                    
                    // Guidelines: Extract grounding chunks
                    const sources = [];
                    const chunks = response.candidates?.[0]?.groundingMetadata?.groundingChunks;
                    if (chunks) {
                        chunks.forEach(c => { if (c.web) sources.push({ uri: c.web.uri, title: c.web.title }); });
                    }
                    
                    setRoutines([...routines, ...newRoutines]);
                    setGroundingSources(sources);
                    setAiPrompt('');
                } catch (e) {
                    console.error("Architect Error:", e);
                    alert("AI Architect encountered an error. Ensure API_KEY is correctly set in your environment.");
                } finally {
                    setIsAiLoading(false);
                }
            };

            const renderContent = () => {
                switch(activeTab) {
                    case 'routines':
                        return (
                            <div className="space-y-6 animate-fade-in">
                                <div className="flex justify-between items-center">
                                    <h2 className="text-2xl font-black text-slate-800">Your Pulse</h2>
                                    <button onClick={() => setShowRoutineModal(true)} className="bg-indigo-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-100 active:scale-95 transition-all"><PlusIcon size={24} /></button>
                                </div>
                                <div className="grid gap-4">
                                    {routines.map(r => {
                                        const isDone = r.history?.includes(new Date().toISOString().split('T')[0]);
                                        return (
                                            <div key={r.id} className="bg-white p-4 rounded-3xl border border-slate-100 flex items-center justify-between group">
                                                <div className="flex items-center gap-4">
                                                    <button onClick={() => handleRoutineToggle(r.id)} className={`w-14 h-14 rounded-2xl flex items-center justify-center transition-all ${isDone ? 'bg-green-100 text-green-600' : 'bg-slate-100 text-slate-400'}`}><CheckIcon size={32} /></button>
                                                    <div>
                                                        <h3 className={`font-bold text-slate-800 ${isDone ? 'line-through opacity-40' : ''}`}>{r.title}</h3>
                                                        <p className="text-[11px] font-black text-slate-400 uppercase tracking-widest mt-1">{r.time} · {r.days.join('·')}</p>
                                                    </div>
                                                </div>
                                                <button onClick={() => setRoutines(routines.filter(x => x.id !== r.id))} className="p-2 text-slate-200 hover:text-red-500 opacity-0 group-hover:opacity-100"><TrashIcon size={20} /></button>
                                            </div>
                                        );
                                    })}
                                    {routines.length === 0 && <div className="text-center py-12 text-slate-400 font-medium">No pulses found. Add one or use AI Architect.</div>}
                                </div>
                            </div>
                        );
                    case 'planner':
                        if (selectedBlueprint) return (
                            <div className="space-y-6 animate-fade-in">
                                <div className="bg-white p-6 rounded-3xl border border-slate-100 flex justify-between items-center">
                                    <h2 className="text-xl font-black text-slate-800">{selectedBlueprint.name}</h2>
                                    <button onClick={() => setSelectedBlueprint(null)} className="p-2 bg-slate-50 rounded-xl"><XIcon size={24} /></button>
                                </div>
                                <div className="relative border-l-4 border-slate-100 ml-6 space-y-6 pb-12 pl-10">
                                    {selectedBlueprint.blocks.sort((a,b) => a.startTime.localeCompare(b.startTime)).map((block, i) => (
                                        <div key={i} className="relative">
                                            <div className="absolute -left-[54px] top-1/2 -translate-y-1/2 w-8 h-8 rounded-2xl border-4 border-white bg-indigo-500 shadow-lg" />
                                            <div className="p-6 rounded-[2rem] bg-white border border-slate-100 shadow-sm">
                                                <p className="text-[10px] font-black text-slate-400 uppercase mb-1">{block.startTime} — {block.endTime}</p>
                                                <h4 className="font-black text-slate-800 text-lg">{block.label}</h4>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        );
                        return (
                            <div className="space-y-6 animate-fade-in">
                                <div className="flex justify-between items-center">
                                    <h2 className="text-2xl font-black text-slate-800">Blueprints</h2>
                                    <button onClick={() => setShowTimetableModal(true)} className="bg-emerald-600 text-white p-3 rounded-2xl shadow-lg shadow-emerald-100"><PlusIcon size={24} /></button>
                                </div>
                                <div className="grid gap-4">
                                    {timetables.map(t => (
                                        <div key={t.id} onClick={() => setSelectedBlueprint(t)} className="bg-white p-6 rounded-[2rem] border border-slate-100 flex justify-between items-center cursor-pointer hover:shadow-md transition-all">
                                            <div className="flex items-center gap-4">
                                                <div className="w-14 h-14 bg-emerald-50 text-emerald-600 rounded-2xl flex items-center justify-center font-black text-xl">{t.name[0]}</div>
                                                <div><h3 className="font-black text-lg text-slate-800">{t.name}</h3><p className="text-xs font-bold text-slate-400">{t.blocks.length} Nodes</p></div>
                                            </div>
                                            <button onClick={(e) => { e.stopPropagation(); setTimetables(timetables.filter(x => x.id !== t.id)); }} className="p-2 text-slate-200 hover:text-red-500"><TrashIcon size={20} /></button>
                                        </div>
                                    ))}
                                    {timetables.length === 0 && <div className="text-center py-12 text-slate-400 font-medium">Create a study or work blueprint.</div>}
                                </div>
                            </div>
                        );
                    case 'ai':
                        return (
                            <div className="space-y-8 animate-fade-in max-w-md mx-auto">
                                <div className="text-center space-y-3">
                                    <div className="inline-block p-4 bg-indigo-600 text-white rounded-[2rem] shadow-xl rotate-3"><SparklesIcon size={36} /></div>
                                    <h2 className="text-3xl font-black text-slate-800 tracking-tight">AI Architect</h2>
                                    <p className="text-slate-500 font-medium text-sm">Design your future with search-backed intelligence.</p>
                                </div>
                                <div className="bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-200 space-y-4">
                                    <textarea 
                                        value={aiPrompt} 
                                        onChange={e => setAiPrompt(e.target.value)} 
                                        placeholder="e.g., 'A productive morning for a software engineer'..." 
                                        className="w-full min-h-[140px] p-6 bg-slate-50 rounded-[2rem] border-none font-medium text-slate-700 outline-none resize-none" 
                                    />
                                    <button 
                                        onClick={runAiArchitect} 
                                        disabled={isAiLoading || !aiPrompt.trim()}
                                        className={`w-full py-5 rounded-[2rem] font-black text-lg flex items-center justify-center gap-3 transition-all ${isAiLoading ? 'bg-slate-200 text-slate-400' : 'bg-slate-900 text-white hover:bg-black shadow-2xl active:scale-95'}`}
                                    >
                                        {isAiLoading ? <div className="w-6 h-6 border-4 border-white/20 border-t-white rounded-full animate-spin" /> : <><SparklesIcon size={20} /> Build Pulse</>}
                                    </button>
                                </div>
                                {groundingSources.length > 0 && (
                                    <div className="bg-indigo-50 p-6 rounded-[2rem] space-y-3">
                                        <h4 className="text-[10px] font-black uppercase text-indigo-400 tracking-widest">Grounding Sources</h4>
                                        <div className="flex flex-wrap gap-2">
                                            {groundingSources.map((s, i) => (
                                                <a key={i} href={s.uri} target="_blank" className="bg-white border border-indigo-100 text-indigo-600 px-4 py-2 rounded-2xl text-[10px] font-bold flex items-center gap-2 hover:bg-indigo-600 hover:text-white transition-all">
                                                    <ExternalLinkIcon size={12} /> {s.title.substring(0, 20)}...
                                                </a>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        );
                    case 'settings':
                        return (
                            <div className="space-y-6 animate-fade-in">
                                <h2 className="text-2xl font-black text-slate-800">System</h2>
                                <div className="bg-white rounded-[2rem] border border-slate-100 shadow-sm divide-y divide-slate-50">
                                    <div className="p-6 flex items-center justify-between group cursor-pointer" onClick={() => alert("All systems operational. Standalone core v4.1 active.")}>
                                        <div className="flex items-center gap-3"><ClockIcon size={20} className="text-indigo-500" /><span className="font-bold text-slate-600">Diagnostics Test</span></div>
                                        <span className="text-[10px] font-black text-slate-300 uppercase">Run Suite</span>
                                    </div>
                                    <div className="p-6 flex items-center justify-between text-red-500 font-bold cursor-pointer hover:bg-red-50 transition-colors" onClick={() => confirm("Wipe all data?") && (localStorage.clear() || window.location.reload())}>
                                        <span>Factory Reset</span>
                                        <TrashIcon size={20} />
                                    </div>
                                </div>
                            </div>
                        );
                }
            };

            return (
                <div className="min-h-screen bg-slate-50 flex flex-col pb-28">
                    <header className="bg-white/80 backdrop-blur-xl sticky top-0 z-50 p-6 border-b border-slate-200 flex justify-between items-center">
                        <div>
                            <h1 className="text-2xl font-black text-indigo-600 tracking-tighter">SyncLife</h1>
                            <p className="text-[9px] font-black uppercase tracking-widest text-slate-400 opacity-80">Autonomous Pulse v4.1</p>
                        </div>
                        <button onClick={() => setActiveTab('settings')} className="p-3 bg-slate-50 rounded-2xl hover:bg-slate-100"><SettingsIcon size={24} /></button>
                    </header>

                    <main className="flex-1 p-6 overflow-y-auto">{renderContent()}</main>

                    <nav className="fixed bottom-6 left-6 right-6 bg-slate-900/95 backdrop-blur-2xl px-8 py-3 rounded-[2.5rem] z-50 shadow-2xl flex justify-between items-center max-w-md mx-auto">
                        <NavItem active={activeTab === 'routines'} onClick={() => setActiveTab('routines')} icon={<ClockIcon size={22} />} label="Pulse" />
                        <div className="relative -top-8"><button onClick={() => setActiveTab('ai')} className={`w-16 h-16 rounded-[2rem] flex items-center justify-center transition-all ${activeTab === 'ai' ? 'bg-indigo-600 text-white' : 'bg-white text-slate-900 shadow-xl'}`}><SparklesIcon size={30} /></button></div>
                        <NavItem active={activeTab === 'planner'} onClick={() => setActiveTab('planner')} icon={<LayoutIcon size={22} />} label="Map" />
                    </nav>

                    {showRoutineModal && (
                        <Modal title="New Pulse" onClose={() => setShowRoutineModal(false)}>
                            <RoutineForm onSave={r => { setRoutines([...routines, r]); setShowRoutineModal(false); }} onCancel={() => setShowRoutineModal(false)} />
                        </Modal>
                    )}
                    {showTimetableModal && (
                        <Modal title="New Map" onClose={() => setShowTimetableModal(false)}>
                            <TimetableForm onSave={t => { setTimetables([...timetables, t]); setShowTimetableModal(false); }} onCancel={() => setShowTimetableModal(false)} />
                        </Modal>
                    )}
                </div>
            );
        };

        const NavItem = ({ active, onClick, icon, label }) => (
            <button onClick={onClick} className={`flex flex-col items-center gap-1 ${active ? 'text-indigo-400' : 'text-slate-500'}`}>
                {icon}<span className="text-[9px] font-black uppercase tracking-widest">{label}</span>
            </button>
        );

        const Modal = ({ title, onClose, children }) => (
            <div className="fixed inset-0 z-[60] bg-slate-900/60 backdrop-blur-md flex items-end sm:items-center justify-center p-4">
                <div className="bg-white w-full max-w-md rounded-[3rem] shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
                    <div className="p-8 border-b border-slate-50 flex justify-between items-center">
                        <h3 className="text-2xl font-black text-slate-800">{title}</h3>
                        <button onClick={onClose} className="p-3 bg-slate-50 rounded-2xl"><XIcon size={24} /></button>
                    </div>
                    <div className="p-8 overflow-y-auto hide-scrollbar">{children}</div>
                </div>
            </div>
        );

        const RoutineForm = ({ onSave, onCancel }) => {
            const [title, setTitle] = useState('');
            const [time, setTime] = useState('08:00');
            const [days, setDays] = useState(['Mon', 'Tue', 'Wed', 'Thu', 'Fri']);
            return (
                <div className="space-y-6">
                    <input autoFocus value={title} onChange={e => setTitle(e.target.value)} className="w-full p-5 bg-slate-50 rounded-2xl font-bold border-none outline-none" placeholder="Pulse Name..." />
                    <input type="time" value={time} onChange={e => setTime(e.target.value)} className="w-full p-5 bg-slate-50 rounded-2xl font-bold border-none outline-none" />
                    <div className="flex flex-wrap gap-2">
                        {['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'].map(d => (
                            <button key={d} onClick={() => setDays(days.includes(d) ? days.filter(x => x !== d) : [...days, d])} className={`w-12 h-12 rounded-xl font-black text-xs ${days.includes(d) ? 'bg-indigo-600 text-white shadow-lg' : 'bg-slate-100 text-slate-400'}`}>{d[0]}</button>
                        ))}
                    </div>
                    <div className="flex gap-4 pt-4">
                        <button onClick={onCancel} className="flex-1 py-4 text-slate-400 font-black uppercase text-xs">Discard</button>
                        <button onClick={() => onSave({ id: Date.now().toString(), title, time, days, history: [] })} disabled={!title} className="flex-[2] py-4 bg-indigo-600 text-white font-black rounded-2xl shadow-xl uppercase text-xs">Commit</button>
                    </div>
                </div>
            );
        };

        const TimetableForm = ({ onSave, onCancel }) => {
            const [name, setName] = useState('');
            const [blocks, setBlocks] = useState([{ id: 1, label: 'Focus Work', startTime: '09:00', endTime: '11:00' }]);
            return (
                <div className="space-y-6">
                    <input value={name} onChange={e => setName(e.target.value)} className="w-full p-5 bg-slate-50 rounded-2xl font-black text-lg border-none" placeholder="Blueprint Name..." />
                    {blocks.map((b, i) => (
                        <div key={b.id} className="p-5 bg-slate-50 rounded-3xl space-y-3">
                            <input value={b.label} onChange={e => setBlocks(blocks.map(x => x.id === b.id ? {...x, label: e.target.value} : x))} className="w-full p-3 bg-white rounded-xl text-sm font-bold border-none" placeholder="Node Title" />
                            <div className="grid grid-cols-2 gap-2">
                                <input type="time" value={b.startTime} onChange={e => setBlocks(blocks.map(x => x.id === b.id ? {...x, startTime: e.target.value} : x))} className="p-2 rounded-lg bg-white text-xs font-bold border-none" />
                                <input type="time" value={b.endTime} onChange={e => setBlocks(blocks.map(x => x.id === b.id ? {...x, endTime: e.target.value} : x))} className="p-2 rounded-lg bg-white text-xs font-bold border-none" />
                            </div>
                        </div>
                    ))}
                    <button onClick={() => setBlocks([...blocks, {id: Date.now(), label: '', startTime: '12:00', endTime: '13:00'}])} className="w-full py-3 bg-slate-100 rounded-xl font-black text-xs uppercase text-slate-400">+ Add Node</button>
                    <div className="flex gap-4 pt-4">
                        <button onClick={onCancel} className="flex-1 py-4 text-slate-400 font-black uppercase text-xs">Cancel</button>
                        <button onClick={() => onSave({ id: Date.now().toString(), name, blocks })} disabled={!name} className="flex-[2] py-4 bg-emerald-600 text-white font-black rounded-2xl shadow-xl uppercase text-xs">Deploy Map</button>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>